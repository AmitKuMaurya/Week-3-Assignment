<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPL LLD</title>
</head>
<body>
    <h1>IPL Assignmnt</h1>
</body>
</html>

<script>

//     class Audience{
//         constructor(name,ticketNumber){
//             this.name = name
//             this._ticketNumber = ticketNumber
//         }

//     }

//     class Vvips extends Audience{
//         constructor(name,ticketNumber,level){
//             super(name,ticketNumber);
//             this.level = "upper";
//         }
//     }

//     class Vips extends Audience{
//         constructor(name,ticketNumber,level){
//             super(name,ticketNumber);
//             this.level = "middle";
//         }
//     }

//     class General extends Audience{
//         constructor(name,ticketNumber,level){
//             super(name,ticketNumber);
//             this.level = "Lower";
//         }
//     }

//     class Slot {
//   constructor(type, number) {
//     this.number = number;
//     this.type = type;
//     this._isBooked = false;
//   }

//   get isBooked() {
//     return this._isBooked;
//   }

//   set isBooked(value) {
//     this._isBooked = value;
//   }
// }

//     let v = new Vvips("amit",68);
//     console.log(v);
    




//     class Vehicle {
//   constructor(type, regNumber, color) {
//     this._type = type;
//     this._regNumber = regNumber;
//     this._color = color;
//   }

//   get type() {
//     return this._type;
//   }

//   set type(value) {
//     this._type = value;
//   }
// }

// // Car

// class Car extends Vehicle {
//   constructor(regNumber, color) {
//     super("car", regNumber, color);
//   }
// }

// // Bike

// class Bike extends Vehicle {
//   constructor(regNumber, color) {
//     super("bike", regNumber, color);
//   }
// }


//     // Truck

// class Truck extends Vehicle {
//   constructor(regNumber, color) {
//     super("Truck", regNumber, color);
//   }
// }

class  Person{
  constructor(type, regNumber, color) {
    this._type = type;
    this._regNumber = regNumber;
    this._color = color;
  }

  get type() {
    return this._type;
  }

  set type(value) {
    this._type = value;
  }
}

// Car

class Vvips extends Person {
  constructor(regNumber, color) {
    super("Top class", regNumber, color);
  }
}

// Bike

class Vips extends Person {
  constructor(regNumber, color) {
    super("Middle class", regNumber, color);
  }
}


    // Truck

class General extends Person {
  constructor(regNumber, color) {
    super("Lower class", regNumber, color);
  }
}

// Parking spots/Slots

class Slot {
  constructor(type, number) {
    this.number = number;
    this.type = type;
    this._isBooked = false;
  }

  get isBooked() {
    return this._isBooked;
  }

  set isBooked(value) {
    this._isBooked = value;
  }
}

// Individual floors

class SittingFloor {
  constructor(floorNumber, maxSpots) {
    this.floorNumber = floorNumber;
    this._parkingSpots = [];

    for (let i = 0; i < maxSpots; i++) {
      if (i === 0) {
        this._parkingSpots.push(new Slot("VVIPs", i));
      } else if (i === 1) {
        this._parkingSpots.push(new Slot("VIPs ", i));
      } else {
        this._parkingSpots.push(new Slot("General", i));
      }
    }
  }

  get parkingSpots() {
    return this._parkingSpots;
  }
}

// Parking lot or the building

class SittingLot {
  constructor(number) {
    this._floors = [];
    this._numberOfFloors = number;

    for (let i = 0; i < number; i++) {
      this._floors.push(new SittingFloor(i, 3));
    }
  }

  get numberOfFloors() {
    return this._numberOfFloors;
  }

  get floors() {
    return this._floors;
  }

  Seatedperson(person) {
    let slot = this.findSlot(person.type);

    if (slot) {
      this.bookSlot(slot);
      let ticket = new Ticket(slot.floorNumber, slot.slot.number);
      console.log("Ticket: ", ticket);
    } else {
      console.log("No slots");
      return false;
    }
  }

  findSlot(type) {
    for (let i = 0; i < this._numberOfFloors; i++) {
      for (let slot of this._floors[i]._parkingSpots) {
        if (slot.type === type && !slot.isBooked) {
          return { floorNumber: i, slot: slot };
        }
      }
    }

    return false;
  }

  bookSlot(slot) {
    slot.slot.isBooked = true;
    console.log("Slot is Booked");
    return true;
  }
}

// Ticket

class Ticket {
  constructor(floorNumber,age,gender) {
    this.floorNumber = floorNumber;
    this.age = age;
    this.gender = gender;
    this.issuedAt = new Date();
  }
}

let t1 = new Ticket(19,31,'male');
console.log(t1)

let v1 = new Vvips(12,'pink');

let sl = new SittingLot(1);

sl.Seatedperson(v1);























































</script>