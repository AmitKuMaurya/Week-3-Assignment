<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
</html>

<script>
    class Vehicle{
        constructor(type,regNumber,color){
            this._type = type;
            this._regNumber = regNumber;
            this._color = color;
        }
        get type(){
            return this._type;
        }

        set type(value){
            return this._type = value;
        }
    }

    class Car extends Vehicle{
        constructor(regNumber,color){
            super("car",regNumber,color);
            
        }
    }
    
    class Bike extends Vehicle{
        constructor(regNumber,color){
            super("bike",regNumber,color);
        }
    }

    class Truck extends Vehicle{
        constructor(regNumber,color){
            super("bike",regNumber,color);
        }
    }
    
    
    // let c1 = new Car("");

    class Slots {
        constructor(type,number){
            this.type = type;
            this.number = number;
            this._isBooked = false;
        }

        get isBooked(){
            return this._isBooked;
        }

        set isBooked(value){
            this._isBooked = value;
        }
    }

    // floor 

    class ParkingFloor {
        constructor(floorNumber,maxSpots){
            this.floorNumber = floorNumber;
            this._parkingSpots = [];

            for(let i=0;i<maxSpots;i++){
                if(i===0){
                    this._parkingSpots.push(new Slots("car",i));
                }
                else if(i===1){
                    this._parkingSpots.push(new Slots("bike",i));
                }
                else{
                    this._parkingSpots.push(new Slots("truck",i));
                }
            }

        }

        get parkingSpots(){
            return this._parkingSpots;
        }

        set parkingSpots(value){
             this._parkingSpots = value;
        }
    }

    // parking lot or building 

    class ParkingLot {
        constructor(number){
            this._floors = [];
            this._numberOfFloor = number;

            for(let i=0;i<number;i++){
                this._floors.push(new ParkingFloor(i,3));
            }
        }

        get numberOfFloor(){
            return this._numberOfFloor;
        }

        get floors(){
            return this._floors;
        }


        parkVehicle(Vehicle){
            let slot = this.findSlot(Vehicle.type);

            if(slot){
                this.bookSlot(slot);
                let ticket = new Ticket(slot.floorNumber,slot.slot.number);
                console.log("Slots are available");
            } else{
                console.log("No slots");
                return false;
            }
        }

        findSlot(type){
            for(let i=0;i<this._numberOfFloor;i++){
                for(let slot of this._floors[i]._parkingSpots){
                    if(slot.type = type && !slot.isBooked){
                        return {floorNumber:i,slot:slot};
                    }
                }
            }
            return false;
        }

        bookSlot(slot){
            slot.slot.isBooked = true;
            console.log('slot is booled');
            return true;
        }

    }


    // ticket 

    class Ticket {
        constructor(floorNumber,slotNumber){
            this.floorNumber = floorNumber;
            this.slotNumber = slotNumber;
            this.issueddate = new Date();
        }
    }

    // let p1 = new ParkingFloor(0,3);
    // console.log(p1);

    let t1 =  new Ticket(2,15);
    console.log(t1);

    let b1 = new Bike("HR-6969","Black");

    let pl1 = new ParkingLot(1);

    pl1.parkVehicle(b1);

    





































































</script>